{{extend 'layout.html'}}

{{ block header_bonus }}
    <h2>{{= feed["feed_title"] }}</h2>
    <a href="{{= URL("mark_read", args=[feed["id"]]) }}" class="button">Mark feed as read</a>
{{ end }}

<section id="story-list">
    {{ 
        for story in stories: 
        if sum([v for k,v in story["intelligence"].iteritems()]) < threshold:
            continue
    }}

        <a href="{{= URL(c="stories", f="view", vars=dict(story=story["id"], feed_id=feed["id"])) }}">
            <div class="story">
                <p class="story-title {{= "unread" if story["read_status"] == 0 else "read" }}">{{= story["story_title"] }}</p>
                <p class="story-date">{{= story["story_date"] }}</p>
            </div>
        </a>
    {{ pass }}
</section>

{{ block footer_bonus }}
    {{ if page > 1: }}
        <p><a href="{{= URL(args=[feed_id], vars={"page": page-1}) }}">Newer stories</a></p>
    {{pass}}

    <p><a href="{{= URL(args=[feed_id], vars={"page": page+1}) }}">Older stories</a></p>
{{ end }}
